---
title: 为什么需要监控
description: 为什么需要监控
sidebar_position: 1
last_update:
  author: 郑学贤
---

# 为什么需要监控?

## 监控的作用

对于服务器运行情况如：CPU使用率、内存使用率、网络状态、磁盘空间等信息，都是需要去了解的，因此监控是必须的。监控方案可谓多种多样，命令行工具、zabbix、grafana等。

线上发布了服务，怎么知道它一切正常，比如发布5台服务器，如何直观了解是否有请求进来，访问一切正常。
某个核心服务挂了，导致大量报错，如何确定到底是哪里出了问题。
SOA带来的问题，调用XX服务出问题，很慢，是否可以衡量？

由于业务系统数量大，每天都会产生大量的系统日志和业务日志，想直接查看内容打开可能几分钟，而且内容之多根本无法查看，给开发和运维带来诸多不便，现业务都是分布式的，日志也是分布在每台服务器上，所以查看日志和统计更是效率低下。实时收集分布在不同节点或机器上的日志，供离线或在线查阅及分析来提升工作效率的需求异常迫切，在此背景下，特对公司统一日志平台进行初步架构设计。

在信息化时代，日志的价值是无穷的。为了对系统进行有效的监控、维护、优化、改进，都离不开对日志的收集和分析，总体分为业务日志监控平台和软硬件服务监控平台。

## 日志监控平台ElasticSearch

Elasticsearch 是位于 Elastic Stack 核心的分布式搜索和分析引擎。Logstash 和 Beats 有助于收集、聚合和丰富您的数据并将其存储在 Elasticsearch 中。Kibana 使您能够以交互方式探索、可视化和分享对数据的见解，并管理和监控堆栈。Elasticsearch 是索引、搜索和分析魔法发生的地方。

Elasticsearch 为所有类型的数据提供近乎实时的搜索和分析。无论您拥有结构化或非结构化文本、数字数据还是地理空间数据，Elasticsearch 都能以支持快速搜索的方式高效地存储和索引它。您可以超越简单的数据检索和聚合信息来发现数据中的趋势和模式。随着您的数据和查询量的增长，Elasticsearch 的分布式特性使您的部署能够随之无缝增长。

## 软硬件服务监控平台

流行的软硬件监控服务的平台的解决方案为：prometheus+  node_export + grafana

### prometheus特点

- 多维度数据模型，一个时间序列由一个度量指标和多个标签键值对确定
- 灵活的查询语言，对收集的时许数据进行重组
- 强大的数据可视化功能，除了内置的浏览器，也支持grafana集成
- 高效存储，内存加本地磁盘，可通过功能分片和联盟来拓展性能
- 运维简单，只依赖于本地磁盘，go二进制安装包没有任何其他依赖
- 精简告警
- 非常多的客户端库
- 提供了许多导出器来收集常用系统指标

### node_export

node_export来监控主机，采集数据传输给prometheus进行存储

### grafana

grafana 把prometheus的数据以很酷炫的方式展示出来，并且支持多维度查询

grafana特点：
- 灵活丰富的图形化选项
- 可以混合多种风格
- 支持白天和夜间模式
- 多个数据源
